<div class="expenses-widget">
  <h3 class="expenses-widget__title">
    <img src="assets/icons/sidebar/expenses.svg" alt="Gastos" class="expenses-widget__icon">
    Gastos
  </h3>

  <div class="expenses-widget__summary">
    <div class="expenses-widget__summary-item">
      <span class="expenses-widget__label">Presupuesto</span>
      <span class="expenses-widget__amount expenses-widget__amount--budget">{{ expenses.budget | number:'1.2-2' }} €</span>
    </div>
    <div class="expenses-widget__summary-item">
      <span class="expenses-widget__label">Gastado</span>
      <span class="expenses-widget__amount expenses-widget__amount--spent">{{ expenses.total | number:'1.2-2' }} €</span>
    </div>
    <div class="expenses-widget__summary-item">
      <span class="expenses-widget__label">Restante</span>
      <span class="expenses-widget__amount" [class.expenses-widget__amount--negative]="expenses.remaining < 0">{{ expenses.remaining | number:'1.2-2' }} €</span>
    </div>
  </div>

  <div class="expenses-widget__progress-container">
    <div class="expenses-widget__progress-bar">
      <div 
        class="expenses-widget__progress-fill" 
        [style.width.%]="getProgressPercentage()"
        [class.expenses-widget__progress-fill--over]="expenses.total > expenses.budget"
      ></div>
    </div>
    <span class="expenses-widget__progress-label">{{ getProgressPercentage() }}%</span>
  </div>

  <ul class="expenses-widget__list" *ngIf="expenses.items.length > 0">
    <li
      *ngFor="let expense of expenses.items"
      class="expenses-widget__item"
    >
      <div class="expenses-widget__item-header">
        <strong>{{ expense.description }}</strong>
      </div>
      <div class="expenses-widget__item-details">
        <span>{{ expense.paidBy }}</span>
        <span class="expenses-widget__item-amount">{{ expense.amount | number:'1.2-2' }} €</span>
      </div>
    </li>
  </ul>

  <p class="expenses-widget__no-expenses" *ngIf="expenses.items.length === 0">
    Sin gastos aún
  </p>

  <div class="expenses-widget__action">
    <app-button
      label="Añadir Gasto"
      variant="primary"
      size="md"
      (click)="addExpense()"
    ></app-button>
  </div>
</div>
