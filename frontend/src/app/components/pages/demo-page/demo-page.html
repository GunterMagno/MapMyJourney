<app-header></app-header>

<section class="demo">
  <header class="demo__header">
    <h1>FASE 1: DOM y Eventos - Demostración Interactiva</h1>
    <p class="demo__subtitle">
      Interactúa con los componentes para ver cómo funcionan:
      Modal con ESC, Tooltips en hover, Tabs dinámicos, Toasts de notificación
    </p>
  </header>

  <!-- Tabs Section -->
  <article class="demo__section">
    <h2>Tabs - Selecciona una pestaña</h2>
    <app-tabs [tabs]="tabItems"></app-tabs>
  </article>

  <!-- Accordion Section -->
  <article class="demo__section">
    <h2>Acordeón - Expand/Collapse Items</h2>
    <app-accordion [items]="accordionItems" [allowMultiple]="true"></app-accordion>
  </article>

  <!-- Dynamic Content Section -->
  <article class="demo__section">
    <h2>DOM Dinámico - Crear/Eliminar Elementos</h2>
    <p>Usa Renderer2 para createElement, appendChild, removeChild</p>
    <app-dynamic-content></app-dynamic-content>
  </article>

  <!-- Modal Section -->
  <article class="demo__section">
    <h2>Modal - Click para abrir (ESC para cerrar)</h2>
    <app-button
      label="Abrir Modal"
      variant="primary"
      size="lg"
      (click)="openModal()">
    </app-button>
  </article>

  <!-- Tooltip Section -->
  <article class="demo__section">
    <h2>Tooltips - Hovea los botones para ver posiciones</h2>
    <div class="demo__tooltip-grid">
      <app-tooltip text="Tooltip arriba" position="top">
        <app-button label="Top" variant="secondary"></app-button>
      </app-tooltip>

      <app-tooltip text="Tooltip abajo" position="bottom">
        <app-button label="Bottom" variant="secondary"></app-button>
      </app-tooltip>

      <app-tooltip text="Tooltip a la izquierda" position="left">
        <app-button label="Left" variant="secondary"></app-button>
      </app-tooltip>

      <app-tooltip text="Tooltip a la derecha" position="right">
        <app-button label="Right" variant="secondary"></app-button>
      </app-tooltip>
    </div>
  </article>

  <!-- FASE 2: Servicios y Comunicación -->
  <header class="demo__header" style="margin-top: 40px;">
    <h1>FASE 2: Servicios y Comunicación</h1>
    <p class="demo__subtitle">
      Los servicios (CommunicationService, ToastService, LoadingService) gestionan estado y lógica.
      Los componentes solo manejan presentación.
    </p>
  </header>

  <!-- Toast Section -->
  <article class="demo__section">
    <h2>Toasts - Notificaciones Globales</h2>
    <div class="demo__toast-buttons">
      <app-button
        label="Success Toast"
        variant="primary"
        size="lg"
        (click)="showSuccessToast()">
      </app-button>

      <app-button
        label="Error Toast"
        variant="danger"
        size="lg"
        (click)="showErrorToast()">
      </app-button>

      <app-button
        label="Warning Toast"
        variant="secondary"
        size="lg"
        (click)="showWarningToast()">
      </app-button>

      <app-button
        label="Info Toast"
        variant="primary"
        size="lg"
        (click)="showInfoToast()">
      </app-button>
    </div>
  </article>

  <!-- Loading States Section -->
  <article class="demo__section">
    <h2>Estados de Carga - Botones Interactivos</h2>
    <div class="demo__toast-buttons">
      <app-button
        label="Guardar"
        variant="primary"
        size="lg"
        [loading]="isSaving"
        loadingText="Guardando..."
        (click)="handleSave()">
      </app-button>

      <app-button
        label="Crear Nuevo"
        variant="secondary"
        size="lg"
        [loading]="isCreating"
        loadingText="Creando..."
        (click)="handleCreate()">
      </app-button>

      <app-button
        label="Eliminar"
        variant="danger"
        size="lg"
        [loading]="isDeleting"
        loadingText="Eliminando..."
        (click)="handleDelete()">
      </app-button>
    </div>
  </article>

  <!-- Global Page Loading Section -->
  <article class="demo__section">
    <h2>Carga Global de Página</h2>
    <p>Simula la carga de una página completa con overlay oscuro y spinner.</p>
    <app-button
      label="Simular Carga de Página (2 segundos)"
      variant="primary"
      size="lg"
      (click)="simulatePageLoad()">
    </app-button>
  </article>

  <!-- Modal Component -->
  <app-modal
    title="Modal de Demostración"
    [isDismissible]="true">
    <div class="demo__modal-content">
      <p>
        <strong>Características del Modal (FASE 1):</strong>
      </p>
      <ul>
        <li>Abre/cierra con estado booleano</li>
        <li>Presiona ESC para cerrar (@HostListener)</li>
        <li>Click en backdrop para cerrar</li>
        <li>Previene que clicks internos cierren el modal (stopPropagation)</li>
        <li>Manipulación segura del DOM con Renderer2</li>
        <li>Bloquea scroll del body al abrir</li>
      </ul>

      <div class="demo__modal-buttons">
        <app-button
          label="Cerrar Modal"
          variant="primary"
          (click)="closeModal()">
        </app-button>
      </div>
    </div>
  </app-modal>

  <!-- FASE 3: Formularios Reactivos -->
  <header class="demo__header" style="margin-top: 40px;">
    <h1>FASE 3: Formularios Reactivos y Validación</h1>
    <p class="demo__subtitle">
      Formularios reactivos con FormBuilder, validadores síncronos y asincronos, 
      FormArray dinámico, y validación cross-field completa.
    </p>
  </header>

  <!-- Formularios Section -->
  <article class="demo__section">
    <h2>Acceder a Formularios Reactivos</h2>
    <p>
      Incluye: validadores síncronos (passwordStrength, nif), 
      asincronos (uniqueEmail, uniqueNif con 500ms debounce), 
      validación cross-field (matchPassword), 
      y FormArray para teléfonos dinámicos.
    </p>
    <div class="demo__toast-buttons">
      <app-button
        label="Ir a Login Form"
        variant="primary"
        size="lg"
        (click)="goToLogin()">
      </app-button>

      <app-button
        label="Ir a Signup Form"
        variant="secondary"
        size="lg"
        (click)="goToSignup()">
      </app-button>
    </div>
  </article>
</section>

<app-footer></app-footer>
