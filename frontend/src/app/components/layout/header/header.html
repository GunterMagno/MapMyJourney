<header class="header">
  <section class="header__left">
    <a routerLink="/">
      <img src="assets/logo.png" alt="MapMyJourney-Logo" class="header__logo-img">
    </a>
  </section>

  <section class="header__center">
    <ng-content select="[header-content]"></ng-content>
  </section>

  <section class="header__right">
    <button class="header__theme-btn" (click)="toggleTheme()" aria-label="Cambiar tema">
      {{ isDarkTheme ? '‚òÄÔ∏è' : 'üåô' }}
    </button>

    <button class="header__hamburger" (click)="toggleMobileMenu()" aria-label="Abrir men√∫">
      <span class="header__hamburger-line"></span>
      <span class="header__hamburger-line"></span>
      <span class="header__hamburger-line"></span>
    </button>

    @if (!isLoggedIn) {
      <button class="header__btn header__btn--primary" (click)="login()">
        Iniciar Sesi√≥n
      </button>
      <button class="header__btn header__btn--secondary" (click)="signup()">
        Registrarse
      </button>
    }

    @if (isLoggedIn) {
      @if (showMyTripsBtn) {
        <button class="header__btn header__btn--primary" (click)="goToTrips()">
          Mis Viajes
        </button>
      }
      @if (showCreateTripBtn) {
        <button class="header__btn header__btn--primary" (click)="createTrip()">
          Crear un viaje
        </button>
      }
      <div class="header__profile">
        <span class="header__profile-avatar">üë§</span>
        <span class="header__profile-name">{{ currentUserName }}</span>
        <button class="header__logout-btn" (click)="logout()" aria-label="Cerrar sesi√≥n">
          Salir
        </button>
      </div>
    }
  </section>

  <!-- Mobile Menu Overlay -->
  <nav class="header__mobile-menu" [class.header__mobile-menu--open]="isMobileMenuOpen" #mobileMenu>
    <article class="header__mobile-menu-header">
      <h2 class="header__mobile-menu-title">Men√∫</h2>
      <button class="header__mobile-menu-close" (click)="closeMobileMenu()" aria-label="Cerrar men√∫">√ó</button>
    </article>
    
    <article class="header__mobile-menu-content">
      @if (!isLoggedIn) {
        <button class="header__mobile-menu-btn header__mobile-menu-btn--primary" (click)="login(); closeMobileMenu()">
          Iniciar Sesi√≥n
        </button>
        <button class="header__mobile-menu-btn header__mobile-menu-btn--secondary" (click)="signup(); closeMobileMenu()">
          Registrarse
        </button>
      }

      @if (isLoggedIn) {
        @if (showMyTripsBtn) {
          <button class="header__mobile-menu-btn header__mobile-menu-btn--primary" (click)="goToTrips(); closeMobileMenu()">
            Mis Viajes
          </button>
        }
        @if (showCreateTripBtn) {
          <button class="header__mobile-menu-btn header__mobile-menu-btn--primary" (click)="createTrip(); closeMobileMenu()">
            Crear un viaje
          </button>
        }
        <button class="header__mobile-menu-btn header__mobile-menu-btn--danger" (click)="logout(); closeMobileMenu()">
          Salir
        </button>
      }
    </article>
  </nav>

  <!-- Overlay backdrop -->
  @if (isMobileMenuOpen) {
    <article class="header__overlay" (click)="closeMobileMenu()"></article>
  }
</header>
