<aside class="sidebar" [class.sidebar--collapsed]="isCollapsed">
  <!-- Botón de colapsar/expandir -->
  <button 
    class="sidebar__collapse-button" 
    (click)="toggleSidebar()"
    aria-label="Colapsar/Expandir sidebar"
    [title]="isCollapsed ? 'Expandir menú' : 'Colapsar menú'"
  >
    <svg class="sidebar__collapse-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path *ngIf="!isCollapsed" d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      <path *ngIf="isCollapsed" d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </button>

  <!-- Header del Viaje -->
  <div class="sidebar__trip-header" *ngIf="tripInfo">
    <button 
      class="sidebar__toggle" 
      (click)="toggleSidebar()"
      aria-label="Toggle sidebar"
      title="Colapsar/Expandir menú"
    >
      <span class="sidebar__toggle-icon">{{ isCollapsed ? '☰' : '✕' }}</span>
    </button>
    
    <div class="sidebar__trip-info" *ngIf="!isCollapsed">
      <h2 class="sidebar__trip-title">{{ tripInfo.title }}</h2>
      <p class="sidebar__trip-destination">{{ getDestination() }}</p>
      <p class="sidebar__trip-dates">{{ getFormattedDates() }}</p>
    </div>
  </div>

  <!-- Enlaces de Navegación -->
  <nav class="sidebar__nav" *ngIf="navLinks.length > 0">
    <ul class="sidebar__list">
      <li class="sidebar__item" *ngFor="let link of navLinks">
        <a 
          [routerLink]="link.route"
          routerLinkActive="sidebar__link--active"
          [routerLinkActiveOptions]="{ exact: true }"
          class="sidebar__link"
          [title]="link.label"
        >
          <img class="sidebar__icon" [src]="link.icon" [alt]="link.label">
          <span class="sidebar__label" *ngIf="!isCollapsed">{{ link.label }}</span>
          <span class="sidebar__badge" *ngIf="link.badge && link.badge > 0 && !isCollapsed">
            {{ link.badge }}
          </span>
        </a>
      </li>
    </ul>
  </nav>

  <!-- Footer con botón de Chat -->
  <div class="sidebar__footer">
    <button 
      class="sidebar__chat-button" 
      (click)="openChat()"
      aria-label="Abrir chat"
      [title]="isCollapsed ? 'Chat' : 'Abrir chat del viaje'"
    >
      <img class="sidebar__chat-icon" src="/assets/icons/sidebar/chat.svg" alt="Chat">
      <span class="sidebar__chat-label" *ngIf="!isCollapsed">Chat</span>
    </button>
  </div>
</aside>
