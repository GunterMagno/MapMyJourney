â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                   MAPMYJOURNEY - MODELO DE DATOS                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ—ï¸  LAS 5 ENTIDADES                                                   â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

â”Œâ”€ users â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuarios del sistema                                                â”‚
â”‚                                                                     â”‚
â”‚  id              BIGINT [PRIMARY KEY]                               â”‚
â”‚  name            VARCHAR(20)  - Nombre 2-20 caracteres              â”‚
â”‚  email           VARCHAR(255) - UNIQUE, para login                  â”‚
â”‚  passwordHash    VARCHAR(255) - Hash seguro (min 8 chars)           â”‚
â”‚  role            ENUM(ADMIN, USER)                                  â”‚
â”‚  profilePicture  TEXT                                               â”‚
â”‚  createdAt       DATETIME [NOT NULL]                                â”‚
â”‚  updatedAt       DATETIME [NOT NULL]                                â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“Œ Ãndice: idx_email UNIQUE(email)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ trips â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Viajes colaborativos                                                â”‚
â”‚                                                                     â”‚
â”‚  id              BIGINT [PRIMARY KEY]                               â”‚
â”‚  title           VARCHAR(20)  - Nombre del viaje                    â”‚
â”‚  destination     VARCHAR(20)  - Destino                             â”‚
â”‚  description     TEXT                                               â”‚
â”‚  startDate       DATE [NOT NULL]                                    â”‚
â”‚  endDate         DATE [NOT NULL]  â†’ endDate >= startDate            â”‚
â”‚  budget          DECIMAL(10,2)                                      â”‚
â”‚  tripCode        VARCHAR(8)   - UNIQUE, para invitaciones           â”‚
â”‚  createdAt       DATETIME [NOT NULL]                                â”‚
â”‚  updatedAt       DATETIME [NOT NULL]                                â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“Œ Ãndice: idx_trip_code UNIQUE(tripCode)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ trip_members â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tabla de UniÃ³n: Usuarios en Viajes (Many-to-Many con roles)         â”‚
â”‚                                                                     â”‚
â”‚  id              BIGINT [PRIMARY KEY]                               â”‚
â”‚  user_id         BIGINT [FOREIGN KEY â†’ users]                       â”‚
â”‚  trip_id         BIGINT [FOREIGN KEY â†’ trips]                       â”‚
â”‚  role            ENUM(OWNER, EDITOR, VIEWER)                        â”‚
â”‚  joinedAt        DATETIME [NOT NULL]                                â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“Œ RestricciÃ³n: UNIQUE(user_id, trip_id)                           â”‚
â”‚  ğŸ“Œ ON DELETE CASCADE                                               â”‚
â”‚                                                                     â”‚
â”‚  ğŸ¯ Permite: Diferentes roles por usuario en cada viaje             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ expenses â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gastos realizados en viajes                                         â”‚
â”‚                                                                     â”‚
â”‚  id              BIGINT [PRIMARY KEY]                               â”‚
â”‚  trip_id         BIGINT [FOREIGN KEY â†’ trips]                       â”‚
â”‚  paid_by_user_id BIGINT [FOREIGN KEY â†’ users]                       â”‚
â”‚  description     VARCHAR(150)                                       â”‚
â”‚  amount          DECIMAL(10,2) [NOT NULL] â†’ > 0.01                  â”‚
â”‚  expenseDate     DATE [NOT NULL]                                    â”‚
â”‚  splitType       ENUM(EQUAL, PERCENT, CUSTOM)                       â”‚
â”‚  receiptUrl      TEXT                                               â”‚
â”‚  createdAt       DATETIME [NOT NULL]                                â”‚
â”‚  updatedAt       DATETIME [NOT NULL]                                â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“Œ ON DELETE CASCADE                                               â”‚
â”‚                                                                     â”‚
â”‚  ğŸ¯ Tipos de divisiÃ³n:                                              â”‚
â”‚     - EQUAL: Divide equitativamente                                 â”‚
â”‚     - PERCENT: Porcentaje personalizado                             â”‚
â”‚     - CUSTOM: Montos exactos                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€ expense_splits â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Detalles de divisiÃ³n de gastos                                      â”‚
â”‚                                                                     â”‚
â”‚  id                  BIGINT [PRIMARY KEY]                           â”‚
â”‚  expense_id          BIGINT [FOREIGN KEY â†’ expenses]                â”‚
â”‚  participant_user_id BIGINT [FOREIGN KEY â†’ users]                   â”‚
â”‚  amount              DECIMAL(10,2) [NOT NULL] â†’ > 0.01              â”‚
â”‚  percentage          DECIMAL(5,2)  - Para divisiones % (0-100)      â”‚
â”‚  paid                BOOLEAN [DEFAULT false]  - Liquidado?          â”‚
â”‚  createdAt           DATETIME [NOT NULL]                            â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“Œ ON DELETE CASCADE                                               â”‚
â”‚                                                                     â”‚
â”‚  ğŸ¯ Registra: QuiÃ©n debe pagar, cuÃ¡nto, si ya pagÃ³                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ”— RELACIONES (CARDINALIDADES)                                        â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

Users (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (N) TripMembers
         â””â”€â”€â”€â”€â”€â”€ "pertenece a" â”€â”€â”€â”€â”˜

Trips (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (N) TripMembers
        â””â”€â”€â”€â”€â”€â”€ "tiene" â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Users (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (N) Expenses
        â””â”€â”€â”€â”€â”€â”€ "paga" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Trips (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (N) Expenses
        â””â”€â”€â”€â”€â”€â”€ "contiene" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Expenses (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (N) ExpenseSplits
          â””â”€â”€â”€â”€â”€â”€ "divide en" â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Users (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (N) ExpenseSplits
        â””â”€â”€â”€â”€â”€â”€ "participa" â”€â”€â”€â”€â”€â”€â”€â”€â”˜



â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ”‘ CLAVES DEL DISEÃ‘O                                                  â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

1. TripMembers como tabla de uniÃ³n inteligente
   â””â”€ Almacena rol diferente por viaje
   â””â”€ Permite control granular de permisos
   â””â”€ Audita cuÃ¡ndo se uniÃ³ cada usuario

2. ExpenseSplits para flexibilidad
   â””â”€ Soporta 3 tipos de divisiÃ³n (EQUAL, PERCENT, CUSTOM)
   â””â”€ Registra si cada usuario pagÃ³
   â””â”€ Permite cÃ¡lculos complejos de deuda

3. Ãndices optimizados
   â””â”€ email: Para login rÃ¡pido
   â””â”€ tripCode: Para invitaciones por cÃ³digo
   â””â”€ uc_user_trip: Para evitar membresÃ­a duplicada

4. Cascadas apropiadas
   â””â”€ CASCADE: trip_members, expenses, splits (viaje â†’ borrar todo)
   â””â”€ RESTRICT: usuarios (previene datos huÃ©rfanos)


â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ ğŸ“ REFERENCIAS RÃPIDAS                                                â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›

Tipos de Datos:
  â””â”€ BIGINT: IDs (AutoIncrement)
  â””â”€ VARCHAR(n): Textos cortos (nombres, cÃ³digos)
  â””â”€ TEXT: Textos largos (descripciones, URLs)
  â””â”€ DECIMAL(10,2): Dinero (evita problemas flotante)
  â””â”€ DATE: Fechas
  â””â”€ DATETIME: Timestamps (auditorÃ­a)
  â””â”€ ENUM: Roles y tipos

Restricciones:
  â””â”€ PRIMARY KEY: Identidad Ãºnica
  â””â”€ UNIQUE: Email, tripCode
  â””â”€ FOREIGN KEY: Integridad referencial
  â””â”€ NOT NULL: Campos obligatorios
  â””â”€ CHECK: Validaciones (endDate >= startDate)

Enums:
  â””â”€ UserRole: ADMIN, USER
  â””â”€ TripMemberRole: OWNER, EDITOR, VIEWER
  â””â”€ ExpenseSplitType: EQUAL, PERCENT, CUSTOM

Ãndices:
  â””â”€ idx_email: UNIQUE(email)
  â””â”€ idx_trip_code: UNIQUE(tripCode)
  â””â”€ uc_user_trip: UNIQUE(user_id, trip_id)